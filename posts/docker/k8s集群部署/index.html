<!doctype html><html lang=zh-CN data-theme=dark><head><meta charset=utf-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#222" media="(prefers-color-scheme: dark)"><meta name=generator content="Hugo 0.116.1"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.png><link rel=icon type=image/x-icon href=/imgs/icons/favicon.png><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/favicon.png><meta itemprop=name content="K8S集群部署"><meta itemprop=description content="今早起来雾沉沉，我是一个抽卡人"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="https://blog.colzry.tk/imgs/avatar.jpg"><meta itemprop=keywords content="Docker"><meta property="og:type" content="article"><meta property="og:title" content="K8S集群部署"><meta property="og:description" content="今早起来雾沉沉，我是一个抽卡人"><meta property="og:image" content="/imgs/avatar.jpg"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="https://blog.colzry.tk/posts/docker/k8s%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/"><meta property="og:site_name" content="Colzry's Blog"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="Colzry"><meta property="article:published_time" content="2023-06-16 10:10:26 +0800 +0800"><meta property="article:modified_time" content="2023-06-16 10:10:26 +0800 +0800"><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/font-awesome/6.1.2/css/all.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.css><link rel=stylesheet href=/css/main.min.736bad66aa83df03ac1b1148dabba6baa8538b32fc07a999584fe912b962daaf.css><style type=text/css>.post-footer,.flinks-list-footer hr:after{content:"~ 我可是有底线的哟 ~"}</style><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":false,"isHome":false,"isPage":true,"path":"k8s%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2","permalink":"https://blog.colzry.tk/posts/docker/k8s%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/","title":"K8S集群部署"}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>K8S集群部署 - Colzry's Blog</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>Colzry's Blog</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>Colzry的博客</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-about"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-flinks"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-thumbs-up hvr-icon"></i>站点示例</a></li><li class="menu-item menu-item-archives"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档
<span class=badge>112</span></a></li><li class="menu-item menu-item-commonweal"><a href=/404.html class=hvr-icon-pulse rel=section><i class="fa fa-heartbeat hvr-icon"></i>公益 404</a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#1-搭建单master集群>1. 搭建单Master集群</a></li><li><a href=#2-安装前准备>2. 安装前准备</a><ul><li><a href=#21-修改和添加主机名>2.1 修改和添加主机名</a></li><li><a href=#22-关闭防火墙>2.2 关闭防火墙</a></li><li><a href=#23-关闭-selinux>2.3 关闭 selinux</a></li><li><a href=#24-关闭swap分区>2.4 关闭swap分区</a></li><li><a href=#25-网桥过滤>2.5 网桥过滤</a></li><li><a href=#26-时间同步>2.6 时间同步</a></li></ul></li><li><a href=#3-所有节点安装docker>3. 所有节点安装Docker</a></li><li><a href=#4-所有节点配置阿里云dockerkubernetes镜像>4. 所有节点配置阿里云Docker、kubernetes镜像</a></li><li><a href=#5-所有节点安装kubelet-kubeadm-kubectl>5. 所有节点安装kubelet kubeadm kubectl</a></li><li><a href=#6-部署kubernetes-master节点>6. 部署Kubernetes Master节点</a></li><li><a href=#7-部署网络插件>7. 部署网络插件</a></li><li><a href=#8-部署node节点>8. 部署node节点</a></li><li><a href=#9-添加图形化管理选做>9. 添加图形化管理（选做）</a><ul><li><a href=#访问-kuboard>访问 Kuboard</a></li><li><a href=#卸载>卸载</a></li></ul></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=Colzry src=/imgs/img-lazy-loading.gif data-src=/imgs/avatar.jpg><p class=site-author-name itemprop=name>Colzry</p><div class=site-description itemprop=description>今早起来雾沉沉，我是一个抽卡人</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>112</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>18</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>57</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/Colzry title="Github → https://github.com/Colzry" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>
Github</a></span>
<span class=links-of-social-item><a href=mailto:colzry@foxmail.com title="E-Mail → mailto:colzry@foxmail.com" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-envelope fa-fw hvr-icon"></i>
E-Mail</a></span></div><div class="cc-license animated" itemprop=license><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh class=cc-opacity rel=noopener target=_blank title=共享知识><img src=/imgs/img-lazy-loading.gif data-src=/imgs/cc/big/by_nc_sa.svg alt=共享知识></a></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>
友情链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://gitee.com/hugo-next/hugo-theme-next title=https://gitee.com/hugo-next/hugo-theme-next target=_blank>Hugo-NexT</a></li><li class=links-of-blogroll-item><a href=https://lisenhui.cn title=https://lisenhui.cn target=_blank>凡梦星尘空间站</a></li></ul></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-gtranslate class=button title=多语言翻译><i class="fas fa-globe"></i></div><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a>
<a href=https://github.com/Colzry rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><script type=text/javascript src=//sidecar.gitter.im/dist/sidecar.v1.js async></script>
<script type=text/javascript>((window.gitter={}).chat={}).options={room:"hugo-next/community"}</script><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blog.colzry.tk/posts/docker/k8s%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.jpg"><meta itemprop=name content="Colzry"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Colzry"><meta itemprop=description content="今早起来雾沉沉，我是一个抽卡人"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="K8S集群部署"><meta itemprop=description content="官网地址：https://kubernetes.io/zh-cn/docs/setup/production-environment/too"></span><header class=post-header><h1 class=post-title itemprop="name headline">K8S集群部署</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i></span>
<span class=post-meta-item-text title=发表于>发表于：</span>
<time title="创建时间：2023-06-16 10:10:26 +0800 +0800" itemprop="dateCreated datePublished" datetime="2023-06-16 10:10:26 +0800 +0800">2023-06-16</time></span>
<span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder-open"></i></span>
<span class=post-meta-item-text title=分类于>分类于：</span>
<span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/docker itemprop=url rel=index><span itemprop=name>Docker</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=字数><span class=post-meta-item-icon><i class="far fa-file-word"></i></span>
<span class=post-meta-item-text>字数：</span>
<span>1632</span></span>
<span class=post-meta-item title=阅读><span class=post-meta-item-icon><i class="far fa-clock"></i></span>
<span class=post-meta-item-text>阅读：&ap;</span>
<span>4分钟</span></span></div></div></header><div class="post-body autonumber" itemprop=articleBody><p>官网地址：https://kubernetes.io/zh-cn/docs/setup/production-environment/tools/kubeadm/</p><h2 id=1-搭建单master集群>1. 搭建单Master集群
<a class=header-anchor href=#1-%e6%90%ad%e5%bb%ba%e5%8d%95master%e9%9b%86%e7%be%a4></a></h2><ol><li>创建一个 Master 节点 <code>kubeadm init</code></li><li>将 Node节点加入到当前集群中 <code>kubeadm join &lt;Master节点的IP和端口></code>
环境准备</li></ol><table><thead><tr><th style=text-align:center>工作节点</th><th style=text-align:center>主机名</th><th style=text-align:center>IP地址</th><th style=text-align:center>系统版本</th></tr></thead><tbody><tr><td style=text-align:center>master</td><td style=text-align:center>k8s-master</td><td style=text-align:center>192.168.211.201</td><td style=text-align:center>almalinux8.6</td></tr><tr><td style=text-align:center>node1</td><td style=text-align:center>k8s-node1</td><td style=text-align:center>192.168.211.202</td><td style=text-align:center>almalinux8.6</td></tr><tr><td style=text-align:center>node2</td><td style=text-align:center>k8s-node2</td><td style=text-align:center>192.168.211.203</td><td style=text-align:center>almalinux8.6</td></tr></tbody></table><blockquote><p><strong>注意：</strong> 从 <code>2 - 5</code> 的内容在在<code>master</code>和<code>node</code>节点主机在都要执行</p></blockquote><h2 id=2-安装前准备>2. 安装前准备
<a class=header-anchor href=#2-%e5%ae%89%e8%a3%85%e5%89%8d%e5%87%86%e5%a4%87></a></h2><h3 id=21-修改和添加主机名>2.1 修改和添加主机名
<a class=header-anchor href=#21-%e4%bf%ae%e6%94%b9%e5%92%8c%e6%b7%bb%e5%8a%a0%e4%b8%bb%e6%9c%ba%e5%90%8d></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 修改主机名 </span>
</span></span><span style=display:flex><span><span style=color:#75715e># 在master节点执行</span>
</span></span><span style=display:flex><span>hostnamectl set-hostname k8s-master
</span></span><span style=display:flex><span><span style=color:#75715e># 在node节点执行</span>
</span></span><span style=display:flex><span>hostnamectl set-hostname k8s-node1
</span></span><span style=display:flex><span>hostnamectl set-hostname k8s-node2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 添加主机名 </span>
</span></span><span style=display:flex><span>cat &gt;&gt; /etc/hosts <span style=color:#e6db74>&lt;&lt; EOF 
</span></span></span><span style=display:flex><span><span style=color:#e6db74>192.168.211.201 k8s-master 
</span></span></span><span style=display:flex><span><span style=color:#e6db74>192.168.211.202 k8s-node1 
</span></span></span><span style=display:flex><span><span style=color:#e6db74>192.168.211.203 k8s-node2 
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div><h3 id=22-关闭防火墙>2.2 关闭防火墙
<a class=header-anchor href=#22-%e5%85%b3%e9%97%ad%e9%98%b2%e7%81%ab%e5%a2%99></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl stop firewalld 
</span></span><span style=display:flex><span>systemctl disable firewalld
</span></span></code></pre></div><h3 id=23-关闭-selinux>2.3 关闭 selinux
<a class=header-anchor href=#23-%e5%85%b3%e9%97%ad-selinux></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>sed -i <span style=color:#e6db74>&#39;s/SELINUX=enforcing/SELINUX=disabled/g&#39;</span> /etc/sysconfig/selinux
</span></span><span style=display:flex><span>setenforce <span style=color:#ae81ff>0</span>
</span></span></code></pre></div><h3 id=24-关闭swap分区>2.4 关闭swap分区
<a class=header-anchor href=#24-%e5%85%b3%e9%97%adswap%e5%88%86%e5%8c%ba></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>先临时关闭，再永久关闭，这样就不用重启
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 临时关闭</span>
</span></span><span style=display:flex><span>swapoff -a
</span></span><span style=display:flex><span><span style=color:#75715e># 永久关闭</span>
</span></span><span style=display:flex><span>sed -ri <span style=color:#e6db74>&#39;s/.*swap.*/#&amp;/&#39;</span> /etc/fstab <span style=color:#75715e># 重启生效</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看效果</span>
</span></span><span style=display:flex><span>free -m
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 重新启动swap分区</span>
</span></span><span style=display:flex><span>swapon -a
</span></span></code></pre></div><h3 id=25-网桥过滤>2.5 网桥过滤
<a class=header-anchor href=#25-%e7%bd%91%e6%a1%a5%e8%bf%87%e6%bb%a4></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>cat &gt; /etc/sysctl.d/k8s.conf <span style=color:#e6db74>&lt;&lt; EOF 
</span></span></span><span style=display:flex><span><span style=color:#e6db74>net.bridge.bridge-nf-call-ip6tables = 1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>net.bridge.bridge-nf-call-iptables = 1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>net.bridge.bridge-nf-call-arptables = 1 
</span></span></span><span style=display:flex><span><span style=color:#e6db74>net.ipv4.ip_forward=1 
</span></span></span><span style=display:flex><span><span style=color:#e6db74>net.ipv4.ip_forward_use_pmtu = 0 
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 生效命令 </span>
</span></span><span style=display:flex><span>sysctl --system
</span></span></code></pre></div><h3 id=26-时间同步>2.6 时间同步
<a class=header-anchor href=#26-%e6%97%b6%e9%97%b4%e5%90%8c%e6%ad%a5></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 安装软件</span>
</span></span><span style=display:flex><span>yum -y install ntpdate
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 向阿里云服务器同步时间</span>
</span></span><span style=display:flex><span>ntpdate time1.aliyun.com
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 删除本地时间并设置时区为上海</span>
</span></span><span style=display:flex><span>rm -rf /etc/localtime 
</span></span><span style=display:flex><span>ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看时间 </span>
</span></span><span style=display:flex><span>date -R <span style=color:#f92672>||</span> date
</span></span></code></pre></div><h2 id=3-所有节点安装docker>3. 所有节点安装Docker
<a class=header-anchor href=#3-%e6%89%80%e6%9c%89%e8%8a%82%e7%82%b9%e5%ae%89%e8%a3%85docker></a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>1.卸载旧版本
</span></span><span style=display:flex><span>yum remove docker <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>docker-client <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>docker-client-latest <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>docker-common <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>docker-latest <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>docker-latest-logrotate <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>docker-logrotate <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>docker-engine
</span></span><span style=display:flex><span>		
</span></span><span style=display:flex><span>2.安装需要的依赖包		
</span></span><span style=display:flex><span>yum install -y yum-utils
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>3.设置阿里云docker镜像
</span></span><span style=display:flex><span>yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo <span style=color:#f92672>&amp;&amp;</span> yum makecache
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>4.安装docker
</span></span><span style=display:flex><span>yum -y install docker-ce docker-ce-cli containerd.io
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>5.启动Docker 
</span></span><span style=display:flex><span>systemctl start docker <span style=color:#f92672>&amp;&amp;</span> systemctl enable docker <span style=color:#f92672>&amp;&amp;</span> systemctl status docker
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>6.查看docker版本信息 
</span></span><span style=display:flex><span>docker info
</span></span></code></pre></div><h2 id=4-所有节点配置阿里云dockerkubernetes镜像>4. 所有节点配置阿里云Docker、kubernetes镜像
<a class=header-anchor href=#4-%e6%89%80%e6%9c%89%e8%8a%82%e7%82%b9%e9%85%8d%e7%bd%ae%e9%98%bf%e9%87%8c%e4%ba%91dockerkubernetes%e9%95%9c%e5%83%8f></a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>1. 配置阿里云docker镜像加速
</span></span><span style=display:flex><span>mkdir -p /etc/docker
</span></span><span style=display:flex><span>cat &gt; /etc/docker/daemon.json <span style=color:#e6db74>&lt;&lt; EOF 
</span></span></span><span style=display:flex><span><span style=color:#e6db74>{ 
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  &#34;registry-mirrors&#34;: [&#34;https://l6p4ic76.mirror.aliyuncs.com&#34;],
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  &#34;log-driver&#34;:&#34;json-file&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  &#34;exec-opts&#34;: [&#34;native.cgroupdriver=systemd&#34;],
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  &#34;log-opts&#34;: {&#34;max-size&#34;:&#34;500m&#34;, &#34;max-file&#34;:&#34;3&#34;}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span><span style=display:flex><span>systemctl restart docker
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>2. 配置阿里云Kubernetes 镜像
</span></span><span style=display:flex><span>cat &gt;&gt; /etc/yum.repos.d/kubernetes.repo <span style=color:#e6db74>&lt;&lt; EOF
</span></span></span><span style=display:flex><span><span style=color:#e6db74>[kubernetes]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>name=Kubernetes
</span></span></span><span style=display:flex><span><span style=color:#e6db74>baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/
</span></span></span><span style=display:flex><span><span style=color:#e6db74>enabled=1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>gpgcheck=1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>repo_gpgcheck=1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div><h2 id=5-所有节点安装kubelet-kubeadm-kubectl>5. 所有节点安装kubelet kubeadm kubectl
<a class=header-anchor href=#5-%e6%89%80%e6%9c%89%e8%8a%82%e7%82%b9%e5%ae%89%e8%a3%85kubelet-kubeadm-kubectl></a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>yum install -y --nogpgcheck kubelet-1.22.15 kubeadm-1.22.15 kubectl-1.22.15
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 指定K8S版本安装，不指定版本默认安装最新版。 </span>
</span></span><span style=display:flex><span><span style=color:#75715e># yum install -y --nogpgcheck kubelet kubeadm kubectl</span>
</span></span><span style=display:flex><span>systemctl enable kubelet <span style=color:#f92672>&amp;&amp;</span> systemctl start kubelet
</span></span></code></pre></div><h2 id=6-部署kubernetes-master节点>6. 部署Kubernetes Master节点
<a class=header-anchor href=#6-%e9%83%a8%e7%bd%b2kubernetes-master%e8%8a%82%e7%82%b9></a></h2><p><strong><code>这里指定阿里云镜像仓库地址，默认的镜像地址无法加载访问。</code></strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>kubeadm init <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>--apiserver-advertise-address<span style=color:#f92672>=</span>192.168.211.201 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>--image-repository registry.aliyuncs.com/google_containers <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>--kubernetes-version v1.22.15 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>--service-cidr<span style=color:#f92672>=</span>10.96.0.0/12 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>--pod-network-cidr<span style=color:#f92672>=</span>10.244.0.0/16
</span></span></code></pre></div><blockquote><p>若出现错误</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@almalinux ~<span style=color:#f92672>]</span><span style=color:#75715e># kubeadm init \</span>
</span></span><span style=display:flex><span>&gt;   --apiserver-advertise-address<span style=color:#f92672>=</span>192.168.211.201 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>&gt;   --image-repository registry.aliyuncs.com/google_containers <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>&gt;   --kubernetes-version v1.25.3 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>&gt;   --service-cidr<span style=color:#f92672>=</span>10.96.0.0/12 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>&gt;   --pod-network-cidr<span style=color:#f92672>=</span>10.244.0.0/16
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>init<span style=color:#f92672>]</span> Using Kubernetes version: v1.25.3
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>preflight<span style=color:#f92672>]</span> Running pre-flight checks
</span></span><span style=display:flex><span>        <span style=color:#f92672>[</span>WARNING FileExisting-tc<span style=color:#f92672>]</span>: tc not found in system path
</span></span><span style=display:flex><span>error execution phase preflight: <span style=color:#f92672>[</span>preflight<span style=color:#f92672>]</span> Some fatal errors occurred:
</span></span><span style=display:flex><span>        <span style=color:#f92672>[</span>ERROR CRI<span style=color:#f92672>]</span>: container runtime is not running: output: E1029 14:48:00.390255   <span style=color:#ae81ff>29768</span> remote_runtime.go:948<span style=color:#f92672>]</span> <span style=color:#e6db74>&#34;Status from runtime service failed&#34;</span> err<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;rpc error: code = Unimplemented desc = unknown service runtime.v1alpha2.RuntimeService&#34;</span>
</span></span><span style=display:flex><span>time<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;2022-10-29T14:48:00+08:00&#34;</span> level<span style=color:#f92672>=</span>fatal msg<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;getting status of runtime: rpc error: code = Unimplemented desc = unknown service runtime.v1alpha2.RuntimeService&#34;</span>
</span></span><span style=display:flex><span>, error: exit status <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>preflight<span style=color:#f92672>]</span> If you know what you are doing, you can make a check non-fatal with <span style=color:#e6db74>`</span>--ignore-preflight-errors<span style=color:#f92672>=</span>...<span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span>To see the stack trace of this error execute with --v<span style=color:#f92672>=</span><span style=color:#ae81ff>5</span> or higher
</span></span></code></pre></div><blockquote><p>解决办法</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>rm -rf /etc/containerd/config.toml
</span></span><span style=display:flex><span>systemctl restart containerd
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 最后使用</span>
</span></span><span style=display:flex><span>kubeadm reset
</span></span></code></pre></div><blockquote><p>若出现错误</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@k8s-master ~<span style=color:#f92672>]</span><span style=color:#75715e># kubeadm init \</span>
</span></span><span style=display:flex><span>&gt; --apiserver-advertise-address<span style=color:#f92672>=</span>192.168.211.201 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>&gt; --image-repository registry.aliyuncs.com/google_containers <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>&gt; --kubernetes-version v1.25.3 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>&gt; --service-cidr<span style=color:#f92672>=</span>10.96.0.0/12 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>&gt; --pod-network-cidr<span style=color:#f92672>=</span>10.244.0.0/16
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>init<span style=color:#f92672>]</span> Using Kubernetes version: v1.25.3
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>preflight<span style=color:#f92672>]</span> Running pre-flight checks
</span></span><span style=display:flex><span>        <span style=color:#f92672>[</span>WARNING FileExisting-tc<span style=color:#f92672>]</span>: tc not found in system path
</span></span><span style=display:flex><span>        <span style=color:#f92672>[</span>WARNING Hostname<span style=color:#f92672>]</span>: hostname <span style=color:#e6db74>&#34;k8s-master&#34;</span> could not be reached
</span></span><span style=display:flex><span>        <span style=color:#f92672>[</span>WARNING Hostname<span style=color:#f92672>]</span>: hostname <span style=color:#e6db74>&#34;k8s-master&#34;</span>: lookup k8s-master on 223.5.5.5:53: no such host
</span></span><span style=display:flex><span>error execution phase preflight: <span style=color:#f92672>[</span>preflight<span style=color:#f92672>]</span> Some fatal errors occurred:
</span></span><span style=display:flex><span>        <span style=color:#f92672>[</span>ERROR FileContent--proc-sys-net-bridge-bridge-nf-call-iptables<span style=color:#f92672>]</span>: /proc/sys/net/bridge/bridge-nf-call-iptables does not exist
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>preflight<span style=color:#f92672>]</span> If you know what you are doing, you can make a check non-fatal with <span style=color:#e6db74>`</span>--ignore-preflight-errors<span style=color:#f92672>=</span>...<span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span>To see the stack trace of this error execute with --v<span style=color:#f92672>=</span><span style=color:#ae81ff>5</span> or higher
</span></span></code></pre></div><blockquote><p>解决方法</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>modprobe br_netfilter
</span></span><span style=display:flex><span>echo <span style=color:#ae81ff>1</span> &gt; /proc/sys/net/bridge/bridge-nf-call-iptables
</span></span></code></pre></div><blockquote><p><strong>注意：</strong> 如果要使用 <code>kubectl get nodes</code> 命令需要做以下配置</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span> - master节点，root用户，执行以下命令
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;export KUBECONFIG=/etc/kubernetes/admin.conf&#34;</span> &gt;&gt; ~/.bash_profile
</span></span><span style=display:flex><span>source ~/.bash_profile
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> - master节点，非root用户，执行以下命令
</span></span><span style=display:flex><span>mkdir -p $HOME/.kube
</span></span><span style=display:flex><span>sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
</span></span><span style=display:flex><span>sudo chown <span style=color:#66d9ef>$(</span>id -u<span style=color:#66d9ef>)</span>:<span style=color:#66d9ef>$(</span>id -g<span style=color:#66d9ef>)</span> $HOME/.kube/config
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>- node节点需要从 master 节点拷贝 admin.con 文件到 node 节点上
</span></span><span style=display:flex><span>scp root@master:/etc/kubernetes/admin.conf /etc/kubernetes/
</span></span><span style=display:flex><span>- root 和 非root 用户的命令同master
</span></span></code></pre></div><h2 id=7-部署网络插件>7. 部署网络插件
<a class=header-anchor href=#7-%e9%83%a8%e7%bd%b2%e7%bd%91%e7%bb%9c%e6%8f%92%e4%bb%b6></a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 以下网络插件任选一个</span>
</span></span><span style=display:flex><span><span style=color:#75715e># CNI网络插件</span>
</span></span><span style=display:flex><span>kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Flannel网络插件</span>
</span></span><span style=display:flex><span>kubectl apply -f https://kuboard.cn/install-script/flannel/flannel-v0.14.0.yaml
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看</span>
</span></span><span style=display:flex><span>kubectl get pods -n kube-system
</span></span></code></pre></div><blockquote><p>若发现有<code>Pending</code>的删除即可，会自动重新部署</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@k8s-master ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl get pods -n kube-system</span>
</span></span><span style=display:flex><span>NAME                                 READY   STATUS    RESTARTS   AGE
</span></span><span style=display:flex><span>coredns-7f6cbbb7b8-6gxf6             0/1     Pending   <span style=color:#ae81ff>0</span>          23m
</span></span><span style=display:flex><span>coredns-7f6cbbb7b8-nnjsk             0/1     Pending   <span style=color:#ae81ff>0</span>          23m
</span></span><span style=display:flex><span>etcd-k8s-master                      1/1     Running   <span style=color:#ae81ff>1</span>          23m
</span></span><span style=display:flex><span>kube-apiserver-k8s-master            1/1     Running   <span style=color:#ae81ff>1</span>          23m
</span></span><span style=display:flex><span>kube-controller-manager-k8s-master   1/1     Running   <span style=color:#ae81ff>1</span>          23m
</span></span><span style=display:flex><span>kube-proxy-6d4d6                     1/1     Running   <span style=color:#ae81ff>0</span>          18m
</span></span><span style=display:flex><span>kube-proxy-m4vx9                     1/1     Running   <span style=color:#ae81ff>0</span>          23m
</span></span><span style=display:flex><span>kube-scheduler-k8s-master            1/1     Running   <span style=color:#ae81ff>1</span>          23m
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@k8s-master ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl delete pods coredns-7f6cbbb7b8-6gxf6 coredns-7f6cbbb7b8-nnjsk  -n kube-system</span>
</span></span><span style=display:flex><span>pod <span style=color:#e6db74>&#34;coredns-7f6cbbb7b8-6gxf6&#34;</span> deleted
</span></span><span style=display:flex><span>pod <span style=color:#e6db74>&#34;coredns-7f6cbbb7b8-nnjsk&#34;</span> deleted
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@k8s-master ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl get pods -n kube-system</span>
</span></span><span style=display:flex><span>NAME                                 READY   STATUS    RESTARTS   AGE
</span></span><span style=display:flex><span>coredns-7f6cbbb7b8-4df47             1/1     Running   <span style=color:#ae81ff>0</span>          11s
</span></span><span style=display:flex><span>coredns-7f6cbbb7b8-wxzcl             1/1     Running   <span style=color:#ae81ff>0</span>          11s
</span></span><span style=display:flex><span>etcd-k8s-master                      1/1     Running   <span style=color:#ae81ff>1</span>          24m
</span></span><span style=display:flex><span>kube-apiserver-k8s-master            1/1     Running   <span style=color:#ae81ff>1</span>          24m
</span></span><span style=display:flex><span>kube-controller-manager-k8s-master   1/1     Running   <span style=color:#ae81ff>1</span>          24m
</span></span><span style=display:flex><span>kube-proxy-6d4d6                     1/1     Running   <span style=color:#ae81ff>0</span>          19m
</span></span><span style=display:flex><span>kube-proxy-m4vx9                     1/1     Running   <span style=color:#ae81ff>0</span>          24m
</span></span><span style=display:flex><span>kube-scheduler-k8s-master 
</span></span></code></pre></div><h2 id=8-部署node节点>8. 部署node节点
<a class=header-anchor href=#8-%e9%83%a8%e7%bd%b2node%e8%8a%82%e7%82%b9></a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 只在 master 节点执行</span>
</span></span><span style=display:flex><span>kubeadm token create --print-join-command
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 在node节点中执行打印出的结果</span>
</span></span><span style=display:flex><span>kubeadm join 192.168.211.201:6443 --token hfyeoe.ie453hoen4eku70w --discovery-token-ca-cert-hash sha256:3716cd7f3c8a52b78b1ab495e7fbd3c6f7dabd899a0237c203c05bce11ac9be6
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 在 master 节点中查看</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@k8s-master ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl get nodes</span>
</span></span><span style=display:flex><span>NAME         STATUS   ROLES                  AGE     VERSION
</span></span><span style=display:flex><span>k8s-master   Ready    control-plane,master   59m     v1.22.3
</span></span><span style=display:flex><span>k8s-node1    Ready    &lt;none&gt;                 54m     v1.22.3
</span></span><span style=display:flex><span>k8s-node2    Ready    &lt;none&gt;                 3m53s   v1.22.3
</span></span></code></pre></div><blockquote><p><strong>注意：</strong> 若新加入的node节点出现<code>NotReady</code>等待一会即可</p></blockquote><h2 id=9-添加图形化管理选做>9. 添加图形化管理（选做）
<a class=header-anchor href=#9-%e6%b7%bb%e5%8a%a0%e5%9b%be%e5%bd%a2%e5%8c%96%e7%ae%a1%e7%90%86%e9%80%89%e5%81%9a></a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 在 master 节点执行</span>
</span></span><span style=display:flex><span>kubectl apply -f https://addons.kuboard.cn/kuboard/kuboard-v3-swr.yaml
</span></span></code></pre></div><p>执行指令 <code>watch kubectl get pods -n kuboard</code>，等待 kuboard 名称空间中所有的 Pod 就绪</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>root@k8s-master ~<span style=color:#f92672>]</span><span style=color:#75715e># kubectl get pods -n kuboard</span>
</span></span><span style=display:flex><span>NAME                               READY   STATUS    RESTARTS   AGE
</span></span><span style=display:flex><span>kuboard-agent-2-85d76b44dd-jvpm2   1/1     Running   <span style=color:#ae81ff>0</span>          9s
</span></span><span style=display:flex><span>kuboard-agent-67864c5f66-4w9z2     1/1     Running   <span style=color:#ae81ff>0</span>          9s
</span></span><span style=display:flex><span>kuboard-etcd-htppb                 1/1     Running   <span style=color:#ae81ff>0</span>          36s
</span></span><span style=display:flex><span>kuboard-v3-765f7bcbfd-lpwct        0/1     Running   <span style=color:#ae81ff>0</span>          36s
</span></span></code></pre></div><h3 id=访问-kuboard>访问 Kuboard
<a class=header-anchor href=#%e8%ae%bf%e9%97%ae-kuboard></a></h3><ul><li><p>在浏览器中打开链接 <code>http://your-node-ip-address:30080</code></p></li><li><p>输入初始用户名和密码，并登录</p><ul><li>用户名： <code>admin</code></li><li>密码： <code>Kuboard123</code></li></ul></li></ul><h3 id=卸载>卸载
<a class=header-anchor href=#%e5%8d%b8%e8%bd%bd></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl delete -f https://addons.kuboard.cn/kuboard/kuboard-v3-swr.yaml
</span></span><span style=display:flex><span>rm -rf /usr/share/kuboard
</span></span></code></pre></div></div><footer class=post-footer><div class=post-tags><a href=/tags/docker>Docker</a></div><div class=addthis_inline_share_toolbox style=text-align:center></div><hr><div class=reward-container><div><i class="fa-solid fa-mug-hot"></i>请我喝杯咖啡吧 ヾ(^▽^*)))</div><button>
赞赏</button><div class=post-reward><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/zs.jpg alt="Colzry - 支付宝">
<span>支付宝</span></div><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/zs.jpg alt="Colzry - 微信">
<span>微信</span></div></div></div><div class=post-copyright><img src=/imgs/cc/cc.svg width=75 height=75 align=right alt=共享知识><ul><li class=post-copyright-title><strong>文章标题：</strong>
K8S集群部署</li><li class=post-copyright-author><strong>本文作者：</strong>
Colzry</li><li class=post-copyright-link><strong>本文链接：</strong>
<a id=post-cr-link href=https://blog.colzry.tk/posts/docker/k8s%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/ title=K8S集群部署>https://blog.colzry.tk/posts/docker/k8s%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/</a></li><li class=post-copyright-license><strong>版权声明：</strong>
本博客所有文章除特别声明外，均采用 <i class="fab fa-fw fa-creative-commons"></i><a target=_blank href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class=followme><span>欢迎关注我的其它发布渠道</span><div class=social-list><div class=social-item><a target=_blank class=social-link href=/images/wechat_channel.jpg><span class=icon><i class="fab fa-weixin"></i></span>
<span class=label>WeChat</span></a></div><div class=social-item><a target=_blank class=social-link href=/atom.xml><span class=icon><i class="fa fa-rss"></i></span>
<span class=label>RSS</span></a></div></div></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/posts/docker/%E6%8D%A2%E6%BA%90/ rel=next title=Docker换源><i class="fa fa-chevron-left"></i> Docker换源</a></div><div class="post-nav-prev post-nav-item"><a href=/posts/docker/%E5%AE%89%E8%A3%85docker/ rel=prev title=安装Docker>安装Docker
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div></main><footer class=footer><div class=footer-inner><div id=gtranslate class=google-translate><i class="fa fa-language"></i><div id=google_translate_element></div></div><div class=copyright>&copy;
<span itemprop=copyrightYear>2019 - 2023</span>
<span class=with-love><i class="fa fa-heart"></i></span>
<span class=author itemprop=copyrightHolder>Colzry</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.116.1 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.5.3 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div><div class=vendors-list><a target=_blank href=https://vercel.com title=Vercel><img src=/imgs/img-lazy-loading.gif data-src=/imgs/vendors/vercel.svg alt=Vercel></a>
<a target=_blank href=https://upyun.com title=又拍云><img src=/imgs/img-lazy-loading.gif data-src=/imgs/vendors/upyun.png alt=又拍云></a>
<a target=_blank href=https://webify.cloudbase.net title=Webify>Webify</a>
<span>提供CDN/云资源支持</span></div></div></footer><script type=text/javascript src=https://cdn.staticfile.org/animejs/3.2.1/anime.min.js defer></script>
<script type=text/javascript src=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.js defer></script>
<script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":true,"save":"manual"},"copybtn":true,"darkmode":true,"giscus":{"cfg":{"category":"Comments","categoryid":null,"emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"username/repo-name","repoid":null,"theme":"preferred_color_scheme"},"js":"https://giscus.app/client.js"},"hostname":"https://blog.colzry.tk/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":null,"views":null},"root":"/","scheme":"Gemini","sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"statis":{"enable":true,"plugin":"busuanzi"},"vendor":{"plugins":"qiniu","router":"https://cdn.staticfile.org"},"version":"4.5.3","waline":{"cfg":{"comment":true,"emoji":false,"imguploader":false,"pageview":true,"placeholder":"请文明发言哟 ヾ(≧▽≦*)o","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"serverurl":null,"sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"waline","file":"dist/waline.css","name":"@waline/client","version":"2.13.0"},"js":{"alias":"waline","file":"dist/waline.js","name":"@waline/client","version":"2.13.0"}}}</script><script type=text/javascript src=/js/main.min.11d6c39ce43fcb97ea816ea2c136c17f188cacbba49ae066e747ea0f71b633a0.js defer></script></body></html>